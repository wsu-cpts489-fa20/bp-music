(this["webpackJsonpspeedgolf-react"]=this["webpackJsonpspeedgolf-react"]||[]).push([[0],{16:function(e,t,a){e.exports=a(25)},24:function(e,t,a){},25:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(14),l=a.n(r),c=(a(21),a(22),a(23),a(24),a(1)),o=a.n(c),i=a(8),u=a(3),m=a(4),d=a(6),p=a(5),h=a(7),f={LOGIN:"LoginMode",FEED:"FeedMode",ROUNDS:"RoundsMode",ROUNDS_LOGROUND:"RoundsMode-LogRound",ROUNDS_EDITROUND:"RoundsMode-EditRound",COURSES:"CoursesMode",LOCATION_SEARCH:"LocationSearchMode"};Object.freeze(f);var b=f,g=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).getMenuBtnIcon=function(){return a.props.mode===b.ROUNDS_LOGROUND||a.props.mode===b.ROUNDS_EDITROUND?"fa fa-arrow-left":a.props.menuOpen?"fa fa-times":"fa fa-bars"},a.handleMenuBtnClick=function(){a.props.mode===b.ROUNDS_LOGROUND||a.props.mode===b.ROUNDS_EDITROUND?a.props.changeMode(b.ROUNDS):a.props.mode!=b.LOGIN&&a.props.toggleMenuOpen()},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"navbar"},s.a.createElement("span",{className:"navbar-items"},s.a.createElement("button",{className:"sidemenu-btn",onClick:this.handleMenuBtnClick},s.a.createElement("span",{id:"menuBtnIcon",className:"sidemenu-btn-icon "+this.getMenuBtnIcon()})),s.a.createElement("img",{src:"https://drive.google.com/thumbnail?id=1YMtwfKIdjcTE9rrqphYZ5AhJYnmOsarQ",alt:"Speed Score Logo",height:"38px",width:"38px"}),s.a.createElement("span",{className:"navbar-title"},"\xa0",this.props.title)))}}]),t}(s.a.Component),E=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).renderModeMenuItems=function(){switch(a.props.mode){case b.FEED:return s.a.createElement("div",null,s.a.createElement("a",{className:"sidemenu-item"},s.a.createElement("span",{className:"fa fa-users"}),"\xa0Followed Users"),s.a.createElement("a",{className:"sidemenu-item "},s.a.createElement("span",{className:"fa fa-search"}),"\xa0Search Feed"));case b.ROUNDS:return s.a.createElement("div",null,s.a.createElement("a",{className:"sidemenu-item"},s.a.createElement("span",{className:"fa fa-plus"}),"\xa0Log New Round"),s.a.createElement("a",{className:"sidemenu-item"},s.a.createElement("span",{className:"fa fa-search"}),"\xa0Search Rounds"));case b.COURSES:return s.a.createElement("div",null,s.a.createElement("a",{className:"sidemenu-item"},s.a.createElement("span",{className:"fa fa-plus"}),"\xa0Add a Course"),s.a.createElement("a",{className:"sidemenu-item"},s.a.createElement("span",{className:"fa fa-search"}),"\xa0Search Courses"));default:return null}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"sidemenu "+(this.props.menuOpen?"sidemenu-open":"sidemenu-closed"),onClick:this.props.toggleMenuOpen},s.a.createElement("div",{className:"sidemenu-title"},s.a.createElement("img",{src:this.props.profilePicURL,height:"60",width:"60"}),s.a.createElement("span",{id:"userID",className:"sidemenu-userID"},"\xa0",this.props.displayName)),this.renderModeMenuItems(),"venue"===this.props.accountType?s.a.createElement("a",{id:"accountBtn",className:"sidemenu-item",onClick:this.props.VenueAccount},s.a.createElement("span",{className:"fa fa-user"}),"\xa0venue"):null,s.a.createElement("a",{id:"aboutBtn",className:"sidemenu-item",onClick:this.props.showAbout},s.a.createElement("span",{className:"fa fa-info-circle"}),"\xa0About"),s.a.createElement("a",{className:"sidemenu-item",onClick:function(){e.props.changeMode(b.LOCATION_SEARCH)}},"Location Search"),s.a.createElement("a",{id:"logOutBtn",className:"sidemenu-item",onClick:this.props.logOut},s.a.createElement("span",{className:"fa fa-sign-out-alt"}),"\xa0Log Out"))}}]),t}(s.a.Component),v=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"modebar"+(this.props.mode===b.LOGIN?" invisible":this.props.menuOpen?" ignore-click visible":" visible")},s.a.createElement("a",{className:this.props.mode===b.FEED?" item-selected":null,onClick:function(){return e.props.changeMode(b.FEED)}},s.a.createElement("span",{className:"modebaricon fa fa-th-list"}),s.a.createElement("span",{className:"modebar-text"},"Coming Up")),s.a.createElement("a",{className:this.props.mode===b.ROUNDS||this.props.mode===b.ROUNDS_EDITROUND||this.props.mode===b.ROUNDS_LOGROUND?" item-selected":null,onClick:function(){return e.props.changeMode(b.ROUNDS)}},s.a.createElement("span",{className:"modebar-icon  fa fa-music"}),s.a.createElement("span",{className:"modebar-text"},"Events")),s.a.createElement("a",{className:this.props.mode===b.COURSES?" item-selected":null,onClick:function(){return e.props.changeMode(b.COURSES)}},s.a.createElement("span",{className:"modebar-icon  fa fa-map-marker"}),s.a.createElement("span",{className:"modebar-text"},"Venues")),s.a.createElement("a",{className:this.props.mode===b.LOCATION_SEARCH?" item-selected":null,onClick:function(){return e.props.changeMode(b.LOCATION_SEARCH)}},s.a.createElement("span",{className:"modebar-icon  fa fa-map-o"}),s.a.createElement("span",{className:"modebar-text"},"Location/Event Finder")))}}]),t}(s.a.Component),N=a(9),y=a(2),O=a(10),S=(a(11),function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).handleChange=function(){var t=e.emailRef.current.value===e.props.email;t!=e.state.emailMatches&&e.setState({emailMatches:t})},e.emailRef=s.a.createRef(),e.state={emailMatches:!1},e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.emailRef.current.focus()}},{key:"render",value:function(){return s.a.createElement("div",{id:"aboutModal",className:"modal",role:"dialog"},s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("center",null,s.a.createElement("h3",{className:"modal-title"},s.a.createElement("b",null,"Confirm Account Deletion"))),s.a.createElement("button",{id:"modalClose",className:"modal-close",onClick:this.props.close},"\xd7")),s.a.createElement("div",{className:"modal-body"},s.a.createElement("p",null,"Do you really want to delete your account? ",s.a.createElement("br",null),s.a.createElement("i",null,"This action cannot be undone.")),s.a.createElement("label",null,"Confirm Email (",this.props.email,"):",s.a.createElement("br",null),s.a.createElement("input",{className:"form-center",type:"text",ref:this.emailRef,onChange:this.handleChange})),s.a.createElement("br",null)),s.a.createElement("div",{className:"modal-footer"},s.a.createElement("button",{className:"btn btn-danger",onClick:this.props.deleteAccount,disabled:!this.state.emailMatches},"Yes, Delete My Account"),s.a.createElement("button",{className:"btn btn-secondary",onClick:this.props.close},"No, Cancel"))))}}]),t}(s.a.Component)),w=function(e){var t=e.label,a=e.isSelected,n=e.onCheckboxChange;return s.a.createElement("div",{className:"form-check"},s.a.createElement("label",null,s.a.createElement("input",{id:"checkbox",type:"checkbox",name:t,checked:a,onChange:n,className:"form-check-input"}),t))},C=["Pop","Hip Hop","Rap","Rock","EDM","Country","RnB","Metal"],k=["Post Malone","Ariana Grande","Taylor Swift","Kanye West","Jay-Z","Lil Wayne","Nicki Minaj","Snoop Dog"],A=["Red Rocks Park and Amphitheatre","Hollywood Bowl","Merriweather Post Pavilion","The Showbox","The Underground"],x=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).checkDataValidity=function(){a.state.password!=a.state.passwordRepeat?a.repeatPassRef.current.setCustomValidity("This password must match password entered in previous field."):a.repeatPassRef.current.setCustomValidity("")},a.handleChange=function(e){var t=null==a.origAccountInfo||a.formIsUpdated(e.target.name,e.target.value);if("profilePic"===e.target.name)if(0==e.target.value.length)a.setState({profilePicURL:"https://icon-library.net//images/default-profile-icon/default-profile-icon-24.jpg",formUpdated:t},a.checkDataValidity);else{var n=Object(O.a)(a),s=new FileReader;s.readAsDataURL(a.profilePicRef.current.files[0]),s.addEventListener("load",(function(){n.setState({profilePicURL:this.result,formUpdated:t},this.checkDataValidity)}))}else if("genres"===e.target.name)a.setState({genres:Array.from(e.target.selectedOptions,(function(e){return e.value}))});else if("streetAddress"===e.target.name){var r;a.GPSvalidate(),a.setState((r={},Object(y.a)(r,e.target.name,e.target.value),Object(y.a)(r,"formUpdated",t),r),a.checkDataValidity)}else{var l;a.setState((l={},Object(y.a)(l,e.target.name,e.target.value),Object(y.a)(l,"formUpdated",t),l),a.checkDataValidity)}},a.formIsUpdated=function(e,t){return a.origAccountInfo[e]!=t||("displayName"!=e&&a.state.displayName!=a.origAccountInfo.displayName||("profilePicURL"!=e&&a.state.profilePicURL!=a.origAccountInfo.profilePicURL||("password"!=e&&a.state.password!==a.origAccountInfo.password||("passwordRepeat"!=e&&a.state.passwordRepeat!==a.origAccountInfo.passwordRepeat||("securityQuestion"!=e&&a.state.securityQuestion!==a.origAccountInfo.securityQuestion||"securityAnswer"!=e&&a.state.securityAnswer!==a.origAccountInfo.securityAnswer)))))},a.setDefaultDisplayName=function(e){e.target.value.length>0&&""===a.state.displayName&&a.setState({displayName:e.target.value})},a.handleSubmit=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,s,r,l,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.setState({showFanDialog:!1,showArtistDialog:!1,showVenueDialog:!1}),n={displayName:a.state.displayName,password:a.state.password,profilePicURL:a.state.profilePicURL,securityQuestion:a.state.securityQuestion,securityAnswer:a.state.securityAnswer,accountType:a.state.accountType},"fan"==a.state.accountType&&(n.genres=a.state.genres,n.artists=a.state.artists,n.venues=a.state.venues,Object.keys(a.state.genreCheckboxes).filter((function(e){return a.state.genreCheckboxes[e]})).forEach((function(e){console.log(e,"is selected and being stored to fan account."),a.state.genres.push(e)})),Object.keys(a.state.artistCheckboxes).filter((function(e){return a.state.artistCheckboxes[e]})).forEach((function(e){console.log(e,"is selected and being stored to fan account."),a.state.artists.push(e)})),Object.keys(a.state.venueCheckboxes).filter((function(e){return a.state.venueCheckboxes[e]})).forEach((function(e){console.log(e,"is selected and being stored to fan account."),a.state.venues.push(e)}))),"artist"==a.state.accountType&&(n.artistName=a.state.artistName,n.genres=a.state.genres,n.instagramHandle=a.state.instagramHandle,n.facebookHandle=a.state.facebookHandle),"venue"==a.state.accountType&&(n.streetAddress=a.state.streetAddress,n.email=a.state.email,n.phoneNumber=a.state.phoneNumber,n.socialMediaLinks=a.state.socialMediaLinks,n.lat=a.state.lat,n.long=a.state.long),console.log("user data: "+JSON.stringify(n)),s=a.state.url,!a.props.create){e.next=22;break}return e.next=11,fetch(s,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(n)});case 11:if(200!=(r=e.sent).status){e.next=16;break}a.props.done("New account created! Enter credentials to log in.",!1),e.next=20;break;case 16:return e.next=18,r.text();case 18:l=e.sent,a.props.done(l,!1);case 20:e.next=33;break;case 22:return e.next=24,fetch(s,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify(n)});case 24:if(200!=(r=e.sent).status){e.next=29;break}a.props.done("User Account Updated!",!1),e.next=33;break;case 29:return e.next=31,r.text();case 31:c=e.sent,a.props.done(c,!1);case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.deleteAccount=Object(i.a)(o.a.mark((function e(){var t,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.url,e.next=3,fetch(t,{method:"DELETE"});case 3:if(200!=(n=e.sent).status){e.next=8;break}a.props.done("Account '"+a.state.accountName+"' has been deleted.",!0),e.next=12;break;case 8:return e.next=10,n.text();case 10:s=e.sent,a.props.done(s,!1);case 12:a.setState({confirmDelete:!1});case 13:case"end":return e.stop()}}),e)}))),a.confirmDeleteAccount=function(e){e.preventDefault(),a.setState({confirmDelete:!0})},a.handleAccountType=function(e){e.preventDefault(),"fan"==a.state.accountType&&a.setState({showFanDialog:!0,url:"/fans/"+a.state.accountName,genres:[],artists:[],venues:[]}),"artist"==a.state.accountType&&a.setState({showArtistDialog:!0,url:"/artists/"+a.state.accountName,artistName:"",genres:[],instagramHandle:"",facebookHandle:""}),"venue"==a.state.accountType&&a.setState({showVenueDialog:!0,url:"/venues/"+a.state.accountName,streetAddress:"",email:"",phoneNumber:"",socialMediaLinks:""})},a.renderFanDialog=function(){var e,t,n;return s.a.createElement("div",{className:"modal",role:"dialog",id:"renderFanDialog"},s.a.createElement("div",{className:"modal-dialog modal-lg"}),s.a.createElement("div",{className:"modal-content form-center"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("h3",null,s.a.createElement("b",null,"Fan Account")),s.a.createElement("button",{className:"modal-close",onClick:a.props.cancel},"\xd7")),s.a.createElement("div",{className:"modal-body"},s.a.createElement("form",{onSubmit:a.handleSubmit},s.a.createElement("br",null),s.a.createElement("label",null,"Genres:"),C.map(a.createGenreCheckbox),s.a.createElement("div",{className:"form-group mt-2"},s.a.createElement("button",(e={id:"selectAllGenresBtn",type:"button"},Object(y.a)(e,"id","selectAllGenreBtn"),Object(y.a)(e,"className","btn btn-outline-primary mr-2"),Object(y.a)(e,"onClick",a.selectAllGenre),e)," Select All "),s.a.createElement("button",{type:"button",id:"deselectAllGenreBtn",className:"btn btn-outline-primary mr-2",onClick:a.deselectAllGenre}," Deselect All ")),s.a.createElement("br",null),s.a.createElement("label",null,"Artists:"),k.map(a.createArtistCheckbox),s.a.createElement("div",{className:"form-group mt-2"},s.a.createElement("button",(t={id:"selectAllArtistsBtn",type:"button"},Object(y.a)(t,"id","selectAllArtistBtn"),Object(y.a)(t,"className","btn btn-outline-primary mr-2"),Object(y.a)(t,"onClick",a.selectAllArtist),t)," Select All "),s.a.createElement("button",{type:"button",id:"deselectAllArtistBtn",className:"btn btn-outline-primary mr-2",onClick:a.deselectAllArtist}," Deselect All ")),s.a.createElement("br",null),s.a.createElement("label",null,"Venues:"),A.map(a.createVenueCheckbox),s.a.createElement("div",{className:"form-group mt-2"},s.a.createElement("button",(n={id:"selectAllVenuesBtn",type:"button"},Object(y.a)(n,"id","selectAllVenueBtn"),Object(y.a)(n,"className","btn btn-outline-primary mr-2"),Object(y.a)(n,"onClick",a.selectAllVenue),n)," Select All "),s.a.createElement("button",{type:"button",id:"deselectAllVenueBtn",className:"btn btn-outline-primary mr-2",onClick:a.deselectAllVenue}," Deselect All ")),s.a.createElement("br",null),s.a.createElement("button",{role:"submit",id:"fanAccountBtn",className:"btn btn-primary btn-color-theme modal-submit-btn"},"\xa0Create Fan Account")))))},a.renderArtistDialog=function(){return s.a.createElement("div",{className:"modal",role:"dialog"},s.a.createElement("div",{className:"modal-dialog modal-lg"}),s.a.createElement("div",{className:"modal-content form-center"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("h3",null,s.a.createElement("b",null,"Artist Account")),s.a.createElement("button",{className:"modal-close",onClick:a.props.cancel},"\xd7")),s.a.createElement("div",{className:"modal-body"},s.a.createElement("form",{onSubmit:a.handleSubmit},s.a.createElement("br",null),s.a.createElement("label",null,"Artist Name:",s.a.createElement("input",{className:"form-control form-text form-center",name:"artistName",type:"text",size:"30",placeholder:"Artist Name",required:!0,value:a.state.artistName,onChange:a.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Genres:",C.map(a.createGenreCheckbox),s.a.createElement("div",{className:"form-group mt-2"},s.a.createElement("button",{id:"selectAllGenresBtn",type:"button",className:"btn btn-outline-primary mr-2",onClick:a.selectAllGenre}," Select All "),s.a.createElement("button",{type:"button",id:"deselectAllGenresBtn",className:"btn btn-outline-primary mr-2",onClick:a.deselectAllGenre}," Deselect All "))),s.a.createElement("br",null),s.a.createElement("label",null,"Instagram:",s.a.createElement("input",{className:"form-control form-text form-center",name:"instagramHandle",type:"text",size:"30",placeholder:"@your-handle",required:!0,value:a.state.instagramHandle,onChange:a.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Facebook:",s.a.createElement("input",{className:"form-control form-text form-center",name:"facebookHandle",type:"text",size:"30",placeholder:"@your-handle",required:!0,value:a.state.facebookHandle,onChange:a.handleChange})),s.a.createElement("br",null),s.a.createElement("button",{role:"submit",className:"btn btn-primary btn-color-theme modal-submit-btn"},"\xa0Create Artist Account")))))},a.GPSvalidate=Object(i.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("location/"+a.state.streetAddress);case 2:if(200!==(t=e.sent).status){e.next=12;break}return e.t0=JSON,e.next=7,t.text();case 7:e.t1=e.sent,n=e.t0.parse.call(e.t0,e.t1),a.setState({validAddress:!0,lat:n.candidates[0].geometry.location.lat,long:n.candidates[0].geometry.location.lng}),e.next=13;break;case 12:a.setState({validAddress:!1});case 13:case"end":return e.stop()}}),e)}))),a.renderVenueDialog=function(){return s.a.createElement("div",{className:"modal",role:"dialog"},s.a.createElement("div",{className:"modal-dialog modal-lg"}),s.a.createElement("div",{className:"modal-content form-center"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("h3",null,s.a.createElement("b",null,"Create Venue Account")),s.a.createElement("button",{className:"modal-close",onClick:a.props.cancel},"\xd7")),s.a.createElement("div",{className:"modal-body"},s.a.createElement("form",{onSubmit:a.handleSubmit},"Street Address:",s.a.createElement("input",{className:"form-control form-text form-center",name:"streetAddress",id:"streetAddress",type:"text",size:"40",placeholder:"123 Example St. Portland, OR",required:!0,value:a.state.streetAddress,onChange:a.handleChange}),"Email:",s.a.createElement("input",{className:"form-control form-text form-center",name:"email",id:"email",type:"text",size:"30",placeholder:"Email",required:!0,value:a.state.email,onChange:a.handleChange}),"Phone:",s.a.createElement("input",{className:"form-control form-text form-center",name:"phoneNumber",id:"phoneNumber",type:"text",size:"30",placeholder:"666-777-1337",required:!0,value:a.state.phoneNumber,onChange:a.handleChange}),"Social Media Links:",s.a.createElement("input",{className:"form-control form-text form-center",name:"socialMediaLinks",id:"socialMediaLinks",type:"text",size:"30",placeholder:"Facebook, Instagram, Etc.",required:!0,value:a.state.socialMediaLinks,onChange:a.handleChange}),s.a.createElement("p",null),a.state.validAddress?s.a.createElement("button",{role:"submit",id:"venueSubmitBtn",className:"btn btn-primary btn-color-theme modal-submit-btn"},"\xa0Create Venue Account"):null))))},a.selectAllGenreCheckboxes=function(e){Object.keys(a.state.genreCheckboxes).forEach((function(t){a.setState((function(a){return{genreCheckboxes:Object(N.a)({},a.genreCheckboxes,Object(y.a)({},t,e))}}))}))},a.selectAllArtistCheckboxes=function(e){Object.keys(a.state.artistCheckboxes).forEach((function(t){a.setState((function(a){return{artistCheckboxes:Object(N.a)({},a.artistCheckboxes,Object(y.a)({},t,e))}}))}))},a.selectAllVenueCheckboxes=function(e){Object.keys(a.state.venueCheckboxes).forEach((function(t){a.setState((function(a){return{venueCheckboxes:Object(N.a)({},a.venueCheckboxes,Object(y.a)({},t,e))}}))}))},a.selectAllGenre=function(){return a.selectAllGenreCheckboxes(!0)},a.deselectAllGenre=function(){return a.selectAllGenreCheckboxes(!1)},a.selectAllArtist=function(){return a.selectAllArtistCheckboxes(!0)},a.deselectAllArtist=function(){return a.selectAllArtistCheckboxes(!1)},a.selectAllVenue=function(){return a.selectAllVenueCheckboxes(!0)},a.deselectAllVenue=function(){return a.selectAllVenueCheckboxes(!1)},a.handleGenreCheckboxChange=function(e){var t=e.target.name;a.setState((function(e){return{genreCheckboxes:Object(N.a)({},e.genreCheckboxes,Object(y.a)({},t,!e.genreCheckboxes[t]))}}))},a.handleArtistCheckboxChange=function(e){var t=e.target.name;a.setState((function(e){return{artistCheckboxes:Object(N.a)({},e.artistCheckboxes,Object(y.a)({},t,!e.artistCheckboxes[t]))}}))},a.handleVenueCheckboxChange=function(e){var t=e.target.name;a.setState((function(e){return{venueCheckboxes:Object(N.a)({},e.venueCheckboxes,Object(y.a)({},t,!e.venueCheckboxes[t]))}}))},a.createGenreCheckbox=function(e){return s.a.createElement(w,{label:e,isSelected:a.state.genreCheckboxes[e],onCheckboxChange:a.handleGenreCheckboxChange,key:e})},a.createArtistCheckbox=function(e){return s.a.createElement(w,{label:e,isSelected:a.state.artistCheckboxes[e],onCheckboxChange:a.handleArtistCheckboxChange,key:e})},a.createVenueCheckbox=function(e){return s.a.createElement(w,{label:e,isSelected:a.state.venueCheckboxes[e],onCheckboxChange:a.handleVenueCheckboxChange,key:e})},a.origAccountInfo=null,a.newUserRef=s.a.createRef(),a.repeatPassRef=s.a.createRef(),a.profilePicRef=s.a.createRef(),a.state={accountName:"",displayName:"",profilePicURL:"https://icon-library.net//images/default-profile-icon/default-profile-icon-24.jpg",password:"",passwordRepeat:"",securityQuestion:"",securityAnswer:"",accountType:"fan",url:"",formUpdated:!1,confirmDelete:!1,showFanDialog:!1,showArtistDialog:!1,showVenueDialog:!1,genres:[],artists:[],venues:[],genreCheckboxes:C.reduce((function(e,t){return Object(N.a)({},e,Object(y.a)({},t,!1))}),{}),artistCheckboxes:k.reduce((function(e,t){return Object(N.a)({},e,Object(y.a)({},t,!1))}),{}),venueCheckboxes:A.reduce((function(e,t){return Object(N.a)({},e,Object(y.a)({},t,!1))}),{})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(o.a.mark((function e(){var t,a,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.create){e.next=12;break}return t=this.state.url,e.next=4,fetch(t);case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,s=JSON.parse(n),this.origAccountInfo=s,this.origAccountInfo.passwordRepeat=s.password,this.setState({accountName:this.props.userId,displayName:s.displayName,profilePicURL:s.profilePicURL,password:s.password,passwordRepeat:s.password,securityQuestion:s.securityQuestion,securityAnswer:s.securityAnswer,accountType:s.accountType,url:"/"+s.accountType+"s/"+this.state.accountName});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"modal",role:"dialog",id:"createNewAccountDialog"},s.a.createElement("div",{className:"modal-dialog modal-lg"}),s.a.createElement("div",{className:"modal-content form-center"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("h3",null,s.a.createElement("b",null,this.props.create?"Create New Account":"Edit Account")),s.a.createElement("button",{className:"modal-close",onClick:this.props.cancel},"\xd7")),s.a.createElement("div",{className:"modal-body"},s.a.createElement("form",{onSubmit:this.handleAccountType},s.a.createElement("label",null,"Account Type:",s.a.createElement("select",{name:"accountType",id:"accountType",value:this.state.accountType,className:"form-control form-textform-center",onChange:this.handleChange},s.a.createElement("option",{id:"fan",value:"fan"},"Fan"),s.a.createElement("option",{id:"artist",value:"artist"},"Artist"),s.a.createElement("option",{id:"venue",value:"venue"},"Venue"))),s.a.createElement("br",null),s.a.createElement("label",null,"Email:",s.a.createElement("input",{id:"emailInput",autocomplete:"off",disabled:!this.props.create,className:"form-control form-text form-center",name:"accountName",type:"email",size:"35",placeholder:"Enter Email Address",pattern:"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}",required:!0,ref:this.newUserRef,value:this.state.accountName,onChange:this.handleChange,onBlur:this.setDefaultDisplayName})),s.a.createElement("br",null),s.a.createElement("label",null,"Password:",s.a.createElement("input",{id:"passwordInput",autocomplete:"off",className:"form-control form-text form-center",name:"password",type:"password",size:"35",placeholder:"Enter Password",pattern:"(?=^.{8,}$)((?=.*\\d)|(?=.*\\W+))(?![.\\n])(?=.*[A-Z])(?=.*[a-z]).*$",required:!0,value:this.state.password,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Repeat Password:",s.a.createElement("input",{id:"repeatPasswordInput",className:"form-control form-text form-center",name:"passwordRepeat",type:"password",size:"35",placeholder:"Repeat Password",required:!0,ref:this.repeatPassRef,value:this.state.passwordRepeat,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Display Name:",s.a.createElement("input",{id:"displayNameInput",className:"form-control form-text form-center",name:"displayName",type:"text",size:"30",placeholder:"Display Name",required:!0,value:this.state.displayName,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Profile Picture:",s.a.createElement("br",null),s.a.createElement("input",{id:"profilePic",className:"form-control form-text form-center",name:"profilePic",type:"file",accept:"image/x-png,image/gif,image/jpeg",ref:this.profilePicRef,value:this.state.profilePic,onChange:this.handleChange}),s.a.createElement("img",{src:""!=this.state.profilePicURL?this.state.profilePicURL:this.state.profilePicDataURL,height:"60",width:"60"})),s.a.createElement("br",null),s.a.createElement("label",null,"Security Question:",s.a.createElement("textarea",{id:"securityQInput",className:"form-control form-text form-center",name:"securityQuestion",size:"35",placeholder:"Security Question",rows:"2",cols:"35",maxLength:"100",required:!0,value:this.state.securityQuestion,onChange:this.handleChange})),s.a.createElement("br",null),s.a.createElement("label",null,"Answer to Security Question:",s.a.createElement("textarea",{id:"securityAInput",className:"form-control form-text form-center",name:"securityAnswer",type:"text",placeholder:"Answer",rows:"2",cols:"35",maxLength:"100",required:!0,value:this.state.securityAnswer,onChange:this.handleChange})),s.a.createElement("br",null),this.props.create?null:s.a.createElement("button",{className:"btn btn-small btn-danger",onClick:this.confirmDeleteAccount},"Delete Account..."),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("button",{role:"submit",id:"submitAccountBtn",disabled:!this.state.formUpdated,className:"btn btn-primary btn-color-theme modal-submit-btn"},s.a.createElement("span",{className:this.props.create?"fa fa-user-plus":"fa fa-user"}),"\xa0",this.props.create?"Create Account":"Update Account")))),this.state.confirmDelete?s.a.createElement(S,{email:this.state.accountName,deleteAccount:this.deleteAccount,close:function(){return e.setState({confirmDelete:!1})}}):null,this.state.showFanDialog?this.renderFanDialog():null,this.state.showArtistDialog?this.renderArtistDialog():null,this.state.showVenueDialog?this.renderVenueDialog():null)}}]),t}(s.a.Component),j=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).handleSubmit=function(t){t.preventDefault(),e.resetPasswordRef.current.value===e.resetPasswordRepeatRef.current.value?e.props.resetPassword(e.resetPasswordRef.current.value):(e.resetPasswordRepeatRef.current.focus(),e.setState({errorMsg:"The passwords you entered do not match. Please try again."}))},e.checkForSubmit=function(t){"Enter"===t.code&&(t.preventDefault(),e.handleSubmit())},e.resetPasswordRef=s.a.createRef(),e.resetPasswordRepeatRef=s.a.createRef(),e.state={errorMsg:""},e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"modal",role:"dialog"},s.a.createElement("div",{className:"modal-dialog modal-lg"},s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("h3",{className:"modal-title"},s.a.createElement("b",null,"Reset Password")),s.a.createElement("button",{className:"modal-close",onClick:this.props.cancelResetPassword},"\xd7")),s.a.createElement("div",{className:"modal-body"},""!=this.state.errorMsg?s.a.createElement("p",{className:"emphasis"},this.state.errorMsg):null,s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("label",null,"New Password:",s.a.createElement("input",{type:"password",placeholder:"Enter new password",pattern:"(?=^.{8,}$)((?=.*\\d)|(?=.*\\W+))(?![.\\n])(?=.*[A-Z])(?=.*[a-z]).*$",className:"form-control form-text",ref:this.resetPasswordRef})),s.a.createElement("label",null,"Repeat New Password:",s.a.createElement("input",{type:"password",placeholder:"Repeat new password",className:"form-control form-text",onKeyUp:this.checkForSubmit,ref:this.resetPasswordRepeatRef})),s.a.createElement("button",{role:"submit",className:"btn btn-primary btn-color-theme form-submit-btn"},s.a.createElement("span",{className:"fa fa-key"}),"\xa0Reset Password"))))))}}]),t}(s.a.Component),R=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).handleLookUpAccount=function(){var t=Object(i.a)(o.a.mark((function t(a){var n,s,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,fetch("/users/"+e.emailRef.current.value);case 3:if(200!=(n=t.sent).status){t.next=12;break}return t.next=7,n.json();case 7:s=t.sent,"local"===(r=JSON.parse(s)).authStrategy?e.props.getSecurityAnswer(r.id,r.securityQuestion,r.securityAnswer):e.setState({ErrMsg:"That account is authenticated through "+r.authStrategy+". Please log in to "+r.authStrategy+" to reset the password."}),t.next=13;break;case 12:e.setState({errorMsg:"Sorry, there is no account associated with '"+e.emailRef.current.value+"'."});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.emailRef=s.a.createRef(),e.state={errorMsg:""},e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t=this;return s.a.createElement("div",{className:"modal",role:"dialog"},s.a.createElement("div",{className:"modal-dialog modal-lg"},s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("h3",{className:"modal-title"},s.a.createElement("b",null,"Look Up Account")),s.a.createElement("button",{className:"modal-close",onClick:function(){t.props.cancelResetPassword()}},"\xd7")),s.a.createElement("div",{className:"modal-body"},""!=this.state.errMsg?s.a.createElement("p",{className:"emphasis"},this.state.errorMsg):null,s.a.createElement("form",{onSubmit:this.handleLookUpAccount},s.a.createElement("label",null,"Account Email Address:",s.a.createElement("input",(e={ref:this.emailRef,className:"form-control form-text",type:"email",size:"35",placeholder:"Enter Email Address",pattern:"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}"},Object(y.a)(e,"ref",this.emailRef),Object(y.a)(e,"required",!0),e))),s.a.createElement("button",{type:"submit",className:"btn btn-primary btn-color-theme form-submit-btn"},s.a.createElement("span",{className:"fa fa-search"}),"\xa0Look Up Account"))))))}}]),t}(s.a.Component),D=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).handleSubmit=function(t){t.preventDefault(),e.securityAnswerRef.current.value===e.props.answer?e.props.getNewPassword():(e.securityAnswerRef.current.focus(),e.setState({errorMsg:"Sorry, that is not the correct answer to the security question. Try again."}))},e.securityAnswerRef=s.a.createRef(),e.state={errorMsg:""},e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.securityAnswerRef.current.focus()}},{key:"render",value:function(){return s.a.createElement("div",{className:"modal",role:"dialog"},s.a.createElement("div",{className:"modal-dialog modal-lg"},s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("h3",{className:"modal-title"},s.a.createElement("b",null,"Answer Security Question")),s.a.createElement("button",{className:"modal-close",onClick:this.props.cancelResetPassword},"\xd7")),s.a.createElement("div",{className:"modal-body"},""!=this.state.errorMsg?s.a.createElement("p",{className:"emphasis"},this.state.errorMsg):null,s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("label",null,"Security Question:",s.a.createElement("textarea",{readOnly:!0,value:this.props.question,className:"form-control form-text",rows:"3",cols:"35"})),s.a.createElement("label",null,"Security Answer:",s.a.createElement("textarea",{className:"form-control form-text",placeholder:"Enter Security Question Answer",ref:this.securityAnswerRef,rows:"3",cols:"35"})),s.a.createElement("button",{role:"submit",className:"btn btn-primary btn-color-theme form-submit-btn"},s.a.createElement("span",{className:"fa fa-check"}),"\xa0Verify Answer"))))))}}]),t}(s.a.Component),M=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).handleLoginSubmit=function(){var t=Object(i.a)(o.a.mark((function t(a){var n,s,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.setState({loginBtnIcon:"fa fa-spin fa-spinner",loginBtnLabel:"Logging In..."}),n="auth/login?username="+e.emailInputRef.current.value+"&password="+e.passwordInputRef.current.value,t.next=5,fetch(n,{method:"POST"});case 5:if(200!=(s=t.sent).status){t.next=10;break}window.open("/","_self"),t.next=14;break;case 10:return t.next=12,s.text();case 12:r=t.sent,e.setState({loginBtnIcon:"fa fa-sign-in",loginBtnLabel:"Log In",statusMsg:r});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.accountCreateDone=function(t){e.setState({statusMsg:t,showCreateAccountDialog:!1})},e.cancelCreateAccount=function(){e.setState({showCreateAccountDialog:!1})},e.cancelResetPassword=function(){e.resetUserId="",e.resetQ="",e.resetA="",e.setState({showLookUpAccountDialog:!1,showSecurityQuestionDialog:!1,showResetPaswordDialog:!1})},e.handleOAuthLogin=function(e){window.open("/auth/".concat(e),"_self")},e.handleOAuthLoginClick=function(t){var a;e.setState((a={},Object(y.a)(a,t+"Icon","fa fa-spin fa-spinner"),Object(y.a)(a,t+"Label","Connecting..."),a)),setTimeout((function(){return e.handleOAuthLogin(t)}),1e3)},e.getSecurityAnswer=function(t,a,n){e.resetUserId=t,e.resetQ=a,e.resetA=n,e.setState({showLookUpAccountDialog:!1,showSecurityQuestionDialog:!0})},e.getNewPassword=function(){e.setState({showSecurityQuestionDialog:!1,showResetPaswordDialog:!0})},e.resetPassword=function(){var t=Object(i.a)(o.a.mark((function t(a){var n,s,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/users/"+e.resetUserId,t.next=3,fetch(n,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify({password:a})});case 3:if(200!=(s=t.sent).status){t.next=8;break}e.setState({showResetPaswordDialog:!1,statusMsg:"Password successfully reset!"}),t.next=12;break;case 8:return t.next=10,s.text();case 10:r=t.sent,e.setState({showResetPasswordDialog:!1,statusMsg:r});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.accountCreateDone=function(t,a){e.setState({statusMsg:t,showCreateAccountDialog:!1})},e.closeStatusMsg=function(){e.setState({statusMsg:""})},e.cancelCreateAccount=function(){e.setState({showCreateAccountDialog:!1})},e.emailInputRef=s.a.createRef(),e.resetUserId="",e.resetQ="",e.resetA="",e.passwordInputRef=s.a.createRef(),e.state={statusMsg:"",loginBtnIcon:"fa fa-sign-in",loginBtnLabel:"Log In",showLookUpAccountDialog:!1,showSecurityQuestionDialog:!1,showResetPaswordDialog:!1,githubIcon:"fa fa-github",githubLabel:"Sign in with GitHub",loginMsg:"",newAccountCreated:!1},e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.emailInputRef.current.focus()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"padded-page",id:"loginPage"},s.a.createElement("center",null,""!=this.state.statusMsg?s.a.createElement("div",{className:"status-msg"},s.a.createElement("span",null,this.state.statusMsg),s.a.createElement("button",{className:"modal-close",onClick:this.closeStatusMsg},s.a.createElement("span",{className:"fa fa-times"}))):null,this.state.showLookUpAccountDialog?s.a.createElement(R,{cancelResetPassword:this.cancelResetPassword,getSecurityAnswer:this.getSecurityAnswer}):null,this.state.showSecurityQuestionDialog?s.a.createElement(D,{cancelResetPassword:this.cancelResetPassword,question:this.resetQ,answer:this.resetA,getNewPassword:this.getNewPassword}):null,this.state.showResetPaswordDialog?s.a.createElement(j,{cancelResetPassword:this.cancelResetPassword,resetPassword:this.resetPassword}):null,s.a.createElement("form",{id:"loginInterface",onSubmit:this.handleLoginSubmit},s.a.createElement("label",{htmlFor:"emailInput",style:{padding:0,fontSize:24}},"Email:",s.a.createElement("input",{id:"userEmail",ref:this.emailInputRef,className:"form-control login-text",type:"email",placeholder:"Enter Email Address",pattern:"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}",required:!0})),s.a.createElement("p",null),s.a.createElement("label",{htmlFor:"passwordInput",style:{padding:0,fontSize:24}},"Password:",s.a.createElement("input",{id:"userPassword",ref:this.passwordInputRef,className:"form-control login-text",type:"password",placeholder:"Enter Password",pattern:"[A-Za-z0-9!@#$%^&*()_+\\-]+",required:!0})),s.a.createElement("p",{className:"bg-danger",id:"feedback",style:{fontSize:16}}),s.a.createElement("button",{type:"submit",id:"loginBtn",className:"btn-color-theme btn btn-primary btn-block login-btn"},s.a.createElement("span",{id:"login-btn-icon",className:this.state.loginBtnIcon}),"\xa0",this.state.loginBtnLabel),s.a.createElement("p",null,s.a.createElement("button",{type:"button",id:"createAccountBtn",className:"btn btn-link login-link",onClick:function(){e.setState({showCreateAccountDialog:!0})}},"Create an account")," |",s.a.createElement("button",{type:"button",className:"btn btn-link login-link",onClick:function(){e.setState({showLookUpAccountDialog:!0})}},"Reset your password")),s.a.createElement("button",{type:"button",className:"btn btn-github",onClick:function(){return e.handleOAuthLoginClick("github")}},s.a.createElement("span",{className:this.state.githubIcon}),"\xa0",this.state.githubLabel),s.a.createElement("p",null,s.a.createElement("i",null,"Version CptS 489"))),this.state.showCreateAccountDialog?s.a.createElement(x,{create:!0,done:this.accountCreateDone,cancel:this.cancelCreateAccount}):null,this.state.showResetPasswordDialog?s.a.createElement(j,null):null))}}]),t}(s.a.Component),U=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"padded-page"},s.a.createElement("center",null,s.a.createElement("h1",null,"Activity Feed"),s.a.createElement("h2",null,"This page is under construction."),s.a.createElement("img",{src:"https://drive.google.com/thumbnail?id=1YMtwfKIdjcTE9rrqphYZ5AhJYnmOsarQ",height:"200",width:"200"}),s.a.createElement("p",{style:{fontStyle:"italic"}},"Version CptS 489 React Demo")))}}]),t}(s.a.Component),I=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{id:"aboutModal",className:"modal",role:"dialog"},s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("center",null,s.a.createElement("h3",{className:"modal-title"},s.a.createElement("b",null,"Confirm Round Deletion"))),s.a.createElement("button",{id:"modalClose",className:"modal-close",onClick:this.props.close},"\xd7")),s.a.createElement("div",{className:"modal-body"},s.a.createElement("p",null,"Do you really want to delete this round?")),s.a.createElement("div",{className:"modal-footer"},s.a.createElement("button",{className:"btn btn-danger",onClick:this.props.deleteRound},"Yes, Delete"),s.a.createElement("button",{className:"btn btn-secondary",onClick:this.props.close},"No, Cancel"))))}}]),t}(s.a.Component),L=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).editRound=function(t){e.props.setEditId(t),e.props.changeMode(b.ROUNDS_EDITROUND)},e.deleteRound=function(){e.props.deleteRound(),e.setState({showConfirmDelete:!1})},e.confirmDelete=function(t){e.props.setDeleteId(t),e.setState({showConfirmDelete:!0})},e.renderTable=function(){for(var t=[],a=function(a){t.push(s.a.createElement("tr",{key:a},s.a.createElement("td",null,e.props.rounds[a].date.substring(0,10)),s.a.createElement("td",null,e.props.rounds[a].course),s.a.createElement("td",null,Number(e.props.rounds[a].strokes)+Number(e.props.rounds[a].minutes)+":"+(e.props.rounds[a].seconds<10?"0"+e.props.rounds[a].seconds:e.props.rounds[a].seconds)+" ("+e.props.rounds[a].strokes+" in "+e.props.rounds[a].minutes+":"+(e.props.rounds[a].seconds<10?"0"+e.props.rounds[a].seconds:e.props.rounds[a].seconds)+")"),s.a.createElement("td",null,s.a.createElement("button",{onClick:e.props.menuOpen?null:function(){return e.editRound(a)}},s.a.createElement("span",{className:"fa fa-eye"}))),s.a.createElement("td",null,s.a.createElement("button",{onClick:e.props.menuOpen?null:function(){return e.confirmDelete(a)}},s.a.createElement("span",{className:"fa fa-trash"})))))},n=0;n<e.props.rounds.length;++n)a(n);return t},e.state={showConfirmDelete:!1},e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"padded-page"},s.a.createElement("h1",null),s.a.createElement("table",{className:"table table-hover"},s.a.createElement("thead",{className:"thead-light"},s.a.createElement("tr",null,s.a.createElement("th",null,"Date"),s.a.createElement("th",null,"Course"),s.a.createElement("th",null,"Score"),s.a.createElement("th",null,"View/Edit..."),s.a.createElement("th",null,"Delete"))),s.a.createElement("tbody",null,0===Object.keys(this.props.rounds).length?s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"5",style:{fontStyle:"italic"}},"No rounds logged")):this.renderTable())),this.state.showConfirmDelete?s.a.createElement(I,{close:function(){return e.setState({showConfirmDelete:!1})},deleteRound:this.deleteRound}):null)}}]),t}(s.a.Component),P=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){var t=e.target.name;if("seconds"===t){var n=e.target.value.length<2?"0"+e.target.value:e.target.value,s=a.computeSGS(a.state.strokes,a.state.minutes,n);a.setState({seconds:n,SGS:s})}else if("strokes"===t){var r=e.target.value,l=a.computeSGS(r,a.state.minutes,a.state.seconds);a.setState({strokes:r,SGS:l})}else if("minutes"===t){var c=e.target.value,o=a.computeSGS(a.state.strokes,c,a.state.seconds);a.setState({minutes:c,SGS:o})}else a.setState(Object(y.a)({},t,e.target.value))},a.handleSubmit=function(e){a.setState({faIcon:"fa fa-spin fa-spinner",btnLabel:a.props.mode===b.ROUNDS_LOGROUND?"Saving...":"Updating..."});var t=a.state;delete t.faIcon,delete t.btnLabel,setTimeout(a.props.saveRound,1e3,t),e.preventDefault()},a.computeSGS=function(e,t,a){return Number(e)+Number(t)+":"+a};var n=new Date(Date.now()-6e4*(new Date).getTimezoneOffset());if(a.props.mode===b.ROUNDS_LOGROUND)a.state={date:n.toISOString().substr(0,10),course:"",type:"practice",holes:"18",strokes:80,minutes:50,seconds:"00",notes:"",faIcon:"fa fa-save",btnLabel:"Save Round Data"};else{var s=Object(N.a)({},a.props.startData);delete s.id,s.faIcon="fa fa-edit",s.btnLabel="Update Round Data",a.state=s}return a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("form",{className:"padded-page",onSubmit:this.handleSubmit},s.a.createElement("center",null,s.a.createElement("label",null,"Date:",s.a.createElement("input",{name:"date",className:"form-control form-center",type:"date",value:this.state.date,onChange:this.handleChange})),s.a.createElement("p",null),s.a.createElement("label",null,"Course:",s.a.createElement("input",{name:"course",className:"form-control form-center",type:"text",value:this.state.course,onChange:this.handleChange,placeholder:"Course played",size:"50",maxLength:"50"})),s.a.createElement("p",null),s.a.createElement("label",null,"Type:",s.a.createElement("select",{name:"type",value:this.state.type,className:"form-control form-center",onChange:this.handleChange},s.a.createElement("option",{value:"practice"},"Practice"),s.a.createElement("option",{value:"tournament"},"Tournament"))),s.a.createElement("p",null),s.a.createElement("label",null,"# Holes:",s.a.createElement("select",{name:"holes",value:this.state.holes,className:"form-control form-center",onChange:this.handleChange},s.a.createElement("option",{value:"9"},"9"),s.a.createElement("option",{value:"18"},"18"))),s.a.createElement("p",null),s.a.createElement("label",null,"# Strokes:",s.a.createElement("input",{name:"strokes",className:"form-control form-center",type:"number",min:"9",max:"200",value:this.state.strokes,onChange:this.handleChange})),s.a.createElement("p",null),s.a.createElement("label",null,"Time: ",s.a.createElement("br",null),s.a.createElement("input",{name:"minutes",type:"number",size:"3",min:"10",max:"400",value:this.state.minutes,onChange:this.handleChange}),":",s.a.createElement("input",{name:"seconds",type:"number",size:"2",min:"0",max:"60",value:this.state.seconds,onChange:this.handleChange})),s.a.createElement("p",null),s.a.createElement("label",null,"Speedgolf Score: ",s.a.createElement("br",null),s.a.createElement("input",{name:"SGS",className:"form-center",type:"text",size:"6",disabled:!0,value:this.computeSGS(this.state.strokes,this.state.minutes,this.state.seconds)})),s.a.createElement("p",null),s.a.createElement("label",null,"Notes:",s.a.createElement("textarea",{name:"notes",className:"form-control",rows:"6",cols:"75",placeholder:"Enter round notes",value:this.state.notes,onChange:this.handleChange})),s.a.createElement("p",null),s.a.createElement("p",null),s.a.createElement("button",{type:"submit",style:{width:"70%",fontSize:"36px"},className:"btn btn-primary btn-color-theme"},s.a.createElement("span",{className:this.state.faIcon}),"\xa0",this.state.btnLabel)))}}]),t}(s.a.Component),T=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"floatbtn",onClick:this.props.handleClick},s.a.createElement("span",{className:"floatbtn-icon fa fa-plus"}))}}]),t}(s.a.Component),V=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).addRound=function(){var t=Object(i.a)(o.a.mark((function t(a){var n,s,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/rounds/"+e.props.userObj.id,t.next=3,fetch(n,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(a)});case 3:return s=t.sent,t.next=6,s.text();case 6:r=t.sent,200!=s.status?(e.setState({errorMsg:r}),e.props.changeMode(b.ROUNDS)):(e.setState({errorMsg:""}),e.props.refreshOnUpdate(b.ROUNDS));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.editRound=function(){var t=Object(i.a)(o.a.mark((function t(a){var n,s,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/rounds/"+e.props.userObj.id+"/"+e.props.userObj.rounds[e.editId]._id,t.next=3,fetch(n,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify(a)});case 3:return s=t.sent,t.next=6,s.text();case 6:r=t.sent,200!=s.status?(e.setState({errorMsg:r}),e.props.changeMode(b.ROUNDS)):e.props.refreshOnUpdate(b.ROUNDS);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.deleteRound=Object(i.a)(o.a.mark((function t(){var a,n,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="/rounds/"+e.props.userObj.id+"/"+e.props.userObj.rounds[e.deleteId]._id,t.next=3,fetch(a,{method:"DELETE"});case 3:return n=t.sent,t.next=6,n.text();case 6:s=t.sent,200!=n.status?(e.setState({errorMsg:"An error occurred when attempting to delete round from database: "+s}),e.props.changeMode(b.ROUNDS)):e.props.refreshOnUpdate(b.ROUNDS);case 8:case"end":return t.stop()}}),t)}))),e.setDeleteId=function(t){e.deleteId=t,e.setState({errorMsg:""})},e.setEditId=function(t){e.editId=t,e.setState({errorMsg:""})},e.closeErrorMsg=function(){e.setState({errorMsg:""})},e.deleteId="",e.editId="",e.state={errorMsg:""},e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;switch(this.props.mode){case b.ROUNDS:return s.a.createElement(s.a.Fragment,null,""!=this.state.errorMsg?s.a.createElement("div",{className:"status-msg"},s.a.createElement("span",null,this.state.errorMsg),s.a.createElement("button",{className:"modal-close",onClick:this.closeErrorMsg},s.a.createElement("span",{className:"fa fa-times"}))):null,s.a.createElement(L,{rounds:this.props.userObj.rounds,setEditId:this.setEditId,setDeleteId:this.setDeleteId,deleteRound:this.deleteRound,changeMode:this.props.changeMode,menuOpen:this.props.menuOpen}),s.a.createElement(T,{handleClick:function(){return e.props.changeMode(b.ROUNDS_LOGROUND)},menuOpen:this.props.menuOpen,icon:"fa fa-plus"}));case b.ROUNDS_LOGROUND:return s.a.createElement(P,{mode:this.props.mode,startData:"",saveRound:this.addRound});case b.ROUNDS_EDITROUND:var t=Object(N.a)({},this.props.userObj.rounds[this.editId]);return t.date=t.date.substr(0,10),t.seconds<10&&(t.seconds="0"+t.seconds),delete t.SGS,s.a.createElement(P,{mode:this.props.mode,startData:t,saveRound:this.editRound})}}}]),t}(s.a.Component),G=a(12),_=a(26),B=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).updateUserLocation=function(e){a.setState({lat:e.coords.latitude,long:e.coords.longitude},a.getVenuesNearMe)},a.getVenuesNearMe=Object(i.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.lat||!a.state.long){e.next=12;break}return e.next=3,fetch("/venues/nearme/"+a.state.distance,{method:"POST",body:JSON.stringify({lat:a.state.lat,long:a.state.long}),headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:if(200!==(t=e.sent).status){e.next=11;break}return e.next=7,t.text();case 7:n=e.sent,a.setState({venuesNearMe:JSON.parse(n)}),e.next=12;break;case 11:a.setState({venuesNearMe:[]});case 12:case"end":return e.stop()}}),e)}))),a.renderVenues=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var l,c=function(){var t=l.value;e.push(s.a.createElement("tr",{key:t},s.a.createElement("td",null,t.user.displayName),s.a.createElement("td",null,t.streetAddress),s.a.createElement("td",null,a.computeDistance(t.lat,t.long)),s.a.createElement("td",null,s.a.createElement("button",{onClick:function(){return a.subscribe(t)}},s.a.createElement("span",{className:"fa fa-bookmark-o"})))))},o=a.state.venuesNearMe[Symbol.iterator]();!(t=(l=o.next()).done);t=!0)c()}catch(i){n=!0,r=i}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e.length>0?e:s.a.createElement("div",null,"No Nearby Venues Found :(")},a.subscribe=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,s,r,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(a.props.accountObj),console.log(a.props.accountObj._id),console.log(a.props.accountObj.user.id),"fan"!==a.props.accountType){e.next=16;break}return a.props.accountObj.venues.push(t._id.toString()),n={venues:a.props.accountObj.venues},s="/fans/"+a.props.accountObj.user.id,e.next=9,fetch(s,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify(n)});case 9:return r=e.sent,e.next=12,r.text();case 12:l=e.sent,200!=r.status?a.setState({statusMsg:l}):a.setState({statusMsg:"Successfully subscribed to "+t.user.displayName+"!"}),e.next=17;break;case 16:a.setState({statusMsg:"Oops! Please sign in on your Fan Account to subscribe to other Venues."});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.closeStatusMsg=function(){a.setState({statusMsg:""})},a.state={venueSearchResult:null,validSearch:!1,lat:void 0,long:void 0,search:!1,distance:20,venuesNearMe:[],noEvents:!1,statusMsg:"",submitBtnIcon:"fa fa-bookmark-o"},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(this.updateUserLocation,(function(e){console.log("Geolocation error: "+e)})):console.log("Geolocation Not Available")}},{key:"computeDistance",value:function(e,t){var a=new G.b(this.state.lat,this.state.long),n=new G.b(e,t);return 621371e-9*Object(_.a)(a,n)}},{key:"render",value:function(){return s.a.createElement("div",{className:"padded-page"},s.a.createElement("h1",null,"Your Venues"),s.a.createElement("table",{className:"table table-hover"},s.a.createElement("thead",{className:"thead-light"},s.a.createElement("tr",null,s.a.createElement("th",null))),s.a.createElement("tbody",null)),""!=this.state.statusMsg?s.a.createElement("div",{className:"status-msg"},s.a.createElement("span",null,this.state.statusMsg),s.a.createElement("button",{className:"modal-close",onClick:this.closeStatusMsg},s.a.createElement("span",{className:"fa fa-times"}))):null)}}]),t}(s.a.Component),z=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"modal",role:"dialog"},s.a.createElement("div",{className:"modal-dialog modal-lg"},s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("h3",null,"About SpeedScore"),s.a.createElement("button",{className:"modal-close",onClick:this.props.close},"\xd7")),s.a.createElement("div",{className:"modal-body"},s.a.createElement("img",{src:"https://dl.dropboxusercontent.com/s/awuwr1vpuw1lkyl/SpeedScore4SplashLogo.png",height:"200",width:"200"}),s.a.createElement("h3",null,"The World's First and Only Suite of Apps for Speedgolf"),s.a.createElement("p",null,"Version CptS 489 Fa20 Complete (MERN)",s.a.createElement("br",null),"\xa9 2017-20 The Professor of Speedgolf. All rights reserved."),s.a.createElement("div",{style:{textAlign:"left"}},s.a.createElement("p",null,"SpeedScore apps support"),s.a.createElement("ul",null,s.a.createElement("li",null,"live touranment scoring (",s.a.createElement("i",null,"SpeedScore Live\xae"),")"),s.a.createElement("li",null,"tracking personal speedgolf rounds and sharing results (",s.a.createElement("i",null,"SpeedScore Track\xae"),")"),s.a.createElement("li",null,"finding speedgolf-friendly courses, booking tee times, and paying to play speedgolf by the minute (",s.a.createElement("i",null,"SpeedScore Play\xae"),")")),s.a.createElement("p",null,"SpeedScore was first developed by Dr. Chris Hundhausen, associate professor of computer science at Washington State University and the ",s.a.createElement("i",null,"Professor of Speedgolf"),", with support from Scott Dawley, CEO of Speedgolf USA, LLC."),s.a.createElement("p",null,"For more information on SpeedScore, visit ",s.a.createElement("a",{href:"http://speedscore.live",target:"_blank"},"SpeedScore's web site"),". For more information on speedgolf, visit ",s.a.createElement("a",{href:"http://playspeedgolf.com",target:"_blank"},"playspeedgolf.com")," and ",s.a.createElement("a",{href:"http://usaspeedgolf.com",target:"_blank"},"Speedgolf USA"),"."))),s.a.createElement("div",{className:"modal-footer"},s.a.createElement("button",{className:"btn btn-primary btn-color-theme",onClick:this.props.close},"OK")))))}}]),t}(s.a.Component),F=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).updateUserLocation=function(e){a.setState({lat:e.coords.latitude,long:e.coords.longitude},a.getVenuesNearMe)},a.computeDistance=function(){var e=new G.b(a.state.lat,a.state.long),t=new G.b(a.state.searchResult.candidates[0].geometry.location.lat,a.state.searchResult.candidates[0].geometry.location.lng);return Object(_.a)(e,t)},a.handleSubmit=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,s,r,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"1"!==a.state.searchType){e.next=17;break}return e.next=4,fetch("/venues/search/"+a.state.searchVal,{method:"GET"});case 4:if(200!==(n=e.sent).status){e.next=14;break}return e.t0=JSON,e.next=9,n.text();case 9:e.t1=e.sent,s=e.t0.parse.call(e.t0,e.t1),a.setState({venueSearchResult:s}),e.next=15;break;case 14:a.setState({venueSearchResult:null});case 15:e.next=30;break;case 17:return e.next=19,fetch("/events/search/"+a.state.searchVal,{method:"GET"});case 19:if(200!==(r=e.sent).status){e.next=29;break}return e.t2=JSON,e.next=24,r.text();case 24:e.t3=e.sent,l=e.t2.parse.call(e.t2,e.t3),a.setState({eventSearchResult:l}),e.next=30;break;case 29:a.setState({eventSearchResult:null});case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){if("distance"===e.target.name)a.setState(Object(y.a)({},e.target.name,e.target.value),a.getVenuesNearMe);else if("searchType"===e.target.name){var t,n;if("1"===e.target.value)a.setState((t={},Object(y.a)(t,e.target.name,e.target.value),Object(y.a)(t,"eventSearchResult",null),t));else a.setState((n={},Object(y.a)(n,e.target.name,e.target.value),Object(y.a)(n,"venueSearchResult",null),n))}else a.setState(Object(y.a)({},e.target.name,e.target.value))},a.displayResults=function(){return s.a.createElement("div",null,s.a.createElement("div",null,"Name: ",a.state.searchResult.candidates[0].name),s.a.createElement("div",null,"Address: ",a.state.searchResult.candidates[0].formatted_address),s.a.createElement("div",null,"Latitude: ",a.state.searchResult.candidates[0].geometry.location.lat),s.a.createElement("div",null,"Longitude: ",a.state.searchResult.candidates[0].geometry.location.lng))},a.showSearch=function(){a.setState({search:!0})},a.getVenuesNearMe=Object(i.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.lat||!a.state.long){e.next=12;break}return e.next=3,fetch("/venues/nearme/"+a.state.distance,{method:"POST",body:JSON.stringify({lat:a.state.lat,long:a.state.long}),headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:if(200!==(t=e.sent).status){e.next=11;break}return e.next=7,t.text();case 7:n=e.sent,a.setState({venuesNearMe:JSON.parse(n)},a.getEventsNearMe),e.next=12;break;case 11:a.setState({venuesNearMe:[]});case 12:case"end":return e.stop()}}),e)}))),a.getEventsNearMe=Object(i.a)(o.a.mark((function e(){var t,n,s,r,l,c,i,u,m,d,p,h,f,b,g;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=!1,s=!0,r=!1,l=void 0,e.prev=5,c=a.state.venuesNearMe[Symbol.iterator]();case 7:if(s=(i=c.next()).done){e.next=47;break}u=i.value,m=!0,d=!1,p=void 0,e.prev=12,h=u.eventIDs[Symbol.iterator]();case 14:if(m=(f=h.next()).done){e.next=30;break}return b=f.value,e.next=18,fetch("events/"+b,{method:"GET"});case 18:if(200!==(g=e.sent).status){e.next=27;break}return e.t0=t,e.t1=JSON,e.next=24,g.text();case 24:e.t2=e.sent,e.t3=e.t1.parse.call(e.t1,e.t2),e.t0.push.call(e.t0,e.t3);case 27:m=!0,e.next=14;break;case 30:e.next=36;break;case 32:e.prev=32,e.t4=e.catch(12),d=!0,p=e.t4;case 36:e.prev=36,e.prev=37,m||null==h.return||h.return();case 39:if(e.prev=39,!d){e.next=42;break}throw p;case 42:return e.finish(39);case 43:return e.finish(36);case 44:s=!0,e.next=7;break;case 47:e.next=53;break;case 49:e.prev=49,e.t5=e.catch(5),r=!0,l=e.t5;case 53:e.prev=53,e.prev=54,s||null==c.return||c.return();case 56:if(e.prev=56,!r){e.next=59;break}throw l;case 59:return e.finish(56);case 60:return e.finish(53);case 61:0===t.length&&(console.log("No events"),n=!0),a.setState({eventsNearMe:t,noEvents:n});case 63:case"end":return e.stop()}}),e,null,[[5,49,53,61],[12,32,36,44],[37,,39,43],[54,,56,60]])}))),a.showNearMe=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.getVenuesNearMe(),a.setState({search:!1});case 2:case"end":return e.stop()}}),e)}))),a.renderSearch=function(){return s.a.createElement("center",null,s.a.createElement("form",{onSubmit:a.handleSubmit},s.a.createElement("label",null,"Search Type:",s.a.createElement("select",{name:"searchType",value:a.state.searchType,className:"form-control form-center",onChange:a.handleChange},s.a.createElement("option",{value:"1"},"Venues"),s.a.createElement("option",{value:"2"},"Events"))),s.a.createElement("label",null,"Enter a search",s.a.createElement("input",{className:"form-control form-text form-center",name:"searchVal",type:"text",value:a.state.searchVal,onChange:a.handleChange})),s.a.createElement("br",null),s.a.createElement("button",{className:"btn btn-primary btn-color-theme",role:"submit"},"Submit")),null!==a.state.eventSearchResult?s.a.createElement("div",null,a.state.eventSearchResult.name):null,null!==a.state.venueSearchResult?s.a.createElement("div",null,a.state.venueSearchResult.user.displayName):null)},a.renderVenues=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var l,c=function(){var t=l.value;e.push(s.a.createElement("tr",{key:t},s.a.createElement("td",null,t.user.displayName),s.a.createElement("td",null,t.streetAddress),s.a.createElement("td",null,a.computeMiles(t.lat,t.long)),s.a.createElement("td",null,s.a.createElement("button",{onClick:function(){return a.subscribe(t)}},s.a.createElement("span",{className:"fa fa-bookmark-o"})))))},o=a.state.venuesNearMe[Symbol.iterator]();!(t=(l=o.next()).done);t=!0)c()}catch(i){n=!0,r=i}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e.length>0?e:s.a.createElement("div",null,"No Nearby Venues Found :(")},a.subscribe=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,s,r,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("fan"!==a.props.accountType){e.next=13;break}return a.props.accountObj.venues.push(t._id.toString()),n={venues:a.props.accountObj.venues},s="/fans/"+a.props.accountObj.user.id,e.next=6,fetch(s,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify(n)});case 6:return r=e.sent,e.next=9,r.text();case 9:l=e.sent,200!=r.status?a.setState({statusMsg:l}):a.setState({statusMsg:"Successfully subscribed to "+t.user.displayName+"!"}),e.next=14;break;case 13:a.setState({statusMsg:"Oops! Please sign in on your Fan Account to subscribe to other Venues."});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.renderEvents=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var l,c=a.state.eventsNearMe[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var o=l.value;e.push(s.a.createElement("div",null,o.name))}}catch(i){n=!0,r=i}finally{try{t||null==c.return||c.return()}finally{if(n)throw r}}return e.length>0?e:a.state.noEvents?s.a.createElement("div",null,"No events were found"):s.a.createElement("div",null,"Loading nearby events...")},a.renderNearMe=function(){return s.a.createElement("center",null,s.a.createElement("label",null,"Distance:",s.a.createElement("select",{name:"distance",value:a.state.distance,className:"form-control form-center",onChange:a.handleChange},s.a.createElement("option",{value:"5"},"5 miles"),s.a.createElement("option",{value:"10"},"10 miles"),s.a.createElement("option",{value:"20"},"20 miles"),s.a.createElement("option",{value:"50"},"50 miles"))),a.renderVenues(),s.a.createElement("hr",null),a.renderEvents())},a.state={searchVal:"",eventSearchResult:null,venueSearchResult:null,validSearch:!1,mapUrl:"",lat:void 0,long:void 0,search:!1,distance:5,venuesNearMe:[],eventsNearMe:[],noEvents:!1,searchType:"1",statusMsg:""},a.showNearMe(),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(this.updateUserLocation,(function(e){console.log("Geolocation error: "+e)})):console.log("Geolocation Not Available")}},{key:"computeMiles",value:function(e,t){var a=new G.b(this.state.lat,this.state.long),n=new G.b(e,t);return 621371e-9*Object(_.a)(a,n)}},{key:"render",value:function(){return s.a.createElement("div",{className:"padded-page"},s.a.createElement("center",null,s.a.createElement("table",null,s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement("button",{className:"btn btn-primary btn-color-theme",disabled:!this.state.search,onClick:this.showNearMe},"Near me")),s.a.createElement("th",null,s.a.createElement("button",{className:"btn btn-primary btn-color-theme",disabled:this.state.search,onClick:this.showSearch},"Search"))))),this.state.search?this.renderSearch():this.renderNearMe(),""!=this.state.statusMsg?s.a.createElement("div",{className:"status-msg"},s.a.createElement("span",null,this.state.statusMsg),s.a.createElement("button",{className:"modal-close",onClick:this.closeStatusMsg},s.a.createElement("span",{className:"fa fa-times"}))):null)}}]),t}(s.a.Component),Q=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(y.a)({},e.target.name,e.target.value)),a.setState({url:"/events/"+a.state.name})},a.handleSubmit=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={venueId:a.props.userId,name:a.state.name,time:a.state.time,artists:a.state.artists},s=a.state.url,e.next=5,fetch(s,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(n)});case 5:200==e.sent.status&&console.log("Something failed");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.origAccountInfo=null,a.state={url:"",name:"",time:"",artists:""},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"modal",role:"dialog"},s.a.createElement("div",{className:"modal-dialog modal-lg"}),s.a.createElement("div",{className:"modal-content form-center"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("h3",null,s.a.createElement("b",null,"Venue account, create an events!")),s.a.createElement("button",{className:"modal-close",onClick:this.props.cancel},"\xd7")),s.a.createElement("div",{className:"modal-body"},s.a.createElement("form",{onSubmit:this.handleSubmit},"Event Name:",s.a.createElement("input",{className:"form-control form-text form-center",name:"name",id:"name",type:"text",size:"40",required:!0,value:this.state.name,onChange:this.handleChange}),"Time:",s.a.createElement("input",{className:"form-control form-text form-center",name:"time",id:"time",type:"text",size:"30",required:!0,value:this.state.time,onChange:this.handleChange}),"artists:",s.a.createElement("input",{className:"form-control form-text form-center",name:"artists",id:"artists",type:"text",size:"30",required:!0,value:this.state.artists,onChange:this.handleChange}),s.a.createElement("p",null),s.a.createElement("button",{role:"submit",id:"venueSubmitBtn",className:"btn btn-primary btn-color-theme modal-submit-btn"},"\xa0Create Event")))))}}]),t}(s.a.Component),J={};J[b.LOGIN]="URScene Login",J[b.FEED]="Events near you",J[b.ROUNDS]="My events",J[b.ROUNDS_LOGROUND]="Enter new event",J[b.ROUNDS_EDITROUND]="Edit Event",J[b.COURSES]="Venues",J[b.LOCATION_SEARCH]="Location Search";var q={};q[b.LOGIN]=M,q[b.FEED]=U,q[b.ROUNDS]=V,q[b.ROUNDS_LOGROUND]=V,q[b.ROUNDS_EDITROUND]=V,q[b.COURSES]=B,q[b.LOCATION_SEARCH]=F;var H=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).refreshOnUpdate=function(){var t=Object(i.a)(o.a.mark((function t(a){var n,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/users/"+e.state.userObj.id);case 2:return n=t.sent,t.next=5,n.json();case 5:n=t.sent,s=JSON.parse(n),e.setState({userObj:s,mode:a});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChangeMode=function(t){e.setState({mode:t})},e.openMenu=function(){e.setState({menuOpen:!0})},e.closeMenu=function(){e.setState({menuOpen:!1})},e.toggleMenuOpen=function(){e.setState((function(e){return{menuOpen:!e.menuOpen}}))},e.setUserId=function(t){e.setState({userId:t,authenticated:!0})},e.showEditAccount=function(){e.setState({showEditAccountDialog:!0})},e.showVenueAccount=function(){e.setState({showVenueAccountDialog:!0})},e.cancelEditAccount=function(){e.setState({showEditAccountDialog:!1})},e.cancelVenueAccount=function(){e.setState({showVenueAccountDialog:!1})},e.editAccountDone=function(t,a){a?e.setState({showEditAccountDialog:!1,statusMsg:t,mode:b.LOGIN}):(e.setState({showEditAccountDialog:!1,statusMsg:t}),e.setState({showVenueAccountDialog:!1}))},e.closeStatusMsg=function(){e.setState({statusMsg:""})},e.state={mode:b.LOGIN,menuOpen:!1,authenticated:!1,userObj:{displayName:"",profilePicURL:""},accountObj:{},editAccount:!1,showEditAccountDialog:!1,statusMsg:"",showAboutDialog:!1,showVenueAccountDialog:!1},e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.authenticated||fetch("/auth/test").then((function(e){return e.json()})).then((function(t){t.isAuthenticated&&(e.setState({userObj:t.user.user,accountObj:t.user,authenticated:!0,mode:b.FEED}),console.log(t))}))}},{key:"render",value:function(){var e=this,t=q[this.state.mode];return this.componentDidMount(),s.a.createElement("div",null,this.state.showAboutDialog?s.a.createElement(z,{close:function(){return e.setState({showAboutDialog:!1})}}):null,""!=this.state.statusMsg?s.a.createElement("div",{className:"status-msg"},s.a.createElement("span",null,this.state.statusMsg),s.a.createElement("button",{className:"modal-close",onClick:this.closeStatusMsg},s.a.createElement("span",{className:"fa fa-times"}))):null,this.state.showEditAccountDialog?s.a.createElement(x,{create:!1,userId:this.state.userObj.id,done:this.editAccountDone,cancel:this.cancelEditAccount}):null,this.state.showVenueAccountDialog?s.a.createElement(Q,{userId:this.state.userObj._id,done:this.editAccountDone,cancel:this.cancelVenueAccount}):null,s.a.createElement(g,{title:J[this.state.mode],mode:this.state.mode,changeMode:this.handleChangeMode,menuOpen:this.state.menuOpen,toggleMenuOpen:this.toggleMenuOpen}),s.a.createElement(E,{menuOpen:this.state.menuOpen,mode:this.state.mode,toggleMenuOpen:this.toggleMenuOpen,displayName:this.state.userObj.displayName,profilePicURL:this.state.userObj.profilePicURL,localAccount:"local"===this.state.userObj.authStrategy,editAccount:this.showEditAccount,accountType:this.state.userObj.accountType,VenueAccount:this.showVenueAccount,logOut:function(){return e.handleChangeMode(b.LOGIN)},showAbout:function(){e.setState({showAboutDialog:!0})},changeMode:this.handleChangeMode}),s.a.createElement(v,{mode:this.state.mode,changeMode:this.handleChangeMode,menuOpen:this.state.menuOpen,accountType:this.state.userObj.accountType}),s.a.createElement(t,{menuOpen:this.state.menuOpen,mode:this.state.mode,changeMode:this.handleChangeMode,userObj:this.state.userObj,accountObj:this.state.accountObj,accountType:this.state.userObj.accountType,refreshOnUpdate:this.refreshOnUpdate}))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[16,1,2]]]);
//# sourceMappingURL=main.0cbf462e.chunk.js.map